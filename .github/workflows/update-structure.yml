# # .github/workflows/update-structure.yml
# name: ðŸ“‚ Update directory structure

# on:
#   push:
#     paths:
#       - '**/*'

# jobs:
#   update-structure:
#     runs-on: ubuntu-latest
#     steps:
#       # 1. Check out your code
#       - uses: actions/checkout@v3

#       # 2. Install `tree`
#       - name: Install tree
#         run: |
#           sudo apt-get update
#           sudo apt-get install -y tree

#       # 3. Generate a single combined tree in STRUCTURE.md
#       - name: Generate STRUCTURE.md
#         shell: bash
#         run: |
#           # start file
#           echo "<!-- AUTO-GENERATED: DO NOT EDIT -->" > STRUCTURE.md
#           echo "" >> STRUCTURE.md
#           echo "## ðŸ“‚ Directory Structure" >> STRUCTURE.md
#           echo '```plaintext' >> STRUCTURE.md

#           # root marker
#           echo "." >> STRUCTURE.md

#           # list of items under root, in the order you want
#           entries=(
#             aurora
#             JaxIndividualComponentsBenchmarking.ipynb
#             dataset
#             checkpointBackbone
#             checkpointDecoder
#             checkpointEncoder
#             DownloadERA5.py
#             AuroraTesting.py
#             LICENSE
#             README.md
#           )

#           last=$(( ${#entries[@]} - 1 ))
#           for i in "${!entries[@]}"; do
#             item=${entries[$i]}
#             if [ $i -lt $last ]; then
#               prefix="â”œâ”€â”€"
#             else
#               prefix="â””â”€â”€"
#             fi

#             echo "$prefix $item" >> STRUCTURE.md

#             # when we hit aurora, inline its subtree
#             if [ "$item" = "aurora" ]; then
#               tree aurora -L 3 -I '.git|__pycache__|*.pyc' \
#                 | tail -n +2 \
#                 | sed 's/^/â”‚   /' \
#                 >> STRUCTURE.md
#             fi
#           done

#           echo '```' >> STRUCTURE.md

#       # 4. Inject into README.md
#       - name: Update README.md
#         shell: bash
#         run: |
#           sed -e '/<!-- STRUCTURE_START -->/,/<!-- STRUCTURE_END -->/c\
# <!-- STRUCTURE_START -->\
# '"$(sed 's/[\/&]/\\&/g' STRUCTURE.md)"'\
# <!-- STRUCTURE_END -->' \
#             README.md > README.new.md
#           mv README.new.md README.md

#       # 5. Commit & push any changes
#       - name: Commit updated structure
#         uses: EndBug/add-and-commit@v9
#         with:
#           message: docs: update directory structure
#           add: STRUCTURE.md,README.md
